version: '3.1'

services:
  php-fpm-tuto-sf2:
    container_name: 'tuto-sf2'
    build:
      context: '.'
    command: "sh -c 'composer install && bin/console server:run 0.0.0.0:8881'"
    working_dir: '/usr/var/app'
    volumes:
      - "./:/usr/var/app"
      - "./devops/docker/docker-php-ext-xdebug.ini:/usr/local/etc/php/conf.d/docker-php-ext-xdebug.ini"
      - "./devops/docker/php.ini:/usr/local/etc/php/php.ini"
    ports:
      - "8881:8881"
      - "4433:443"
    restart: 'on-failure'
